extern crate bindgen;
extern crate cc;

use std::env;
use std::path::PathBuf;

fn main() {
    cc::Build::new()
        .cpp(true)
        .include("zxing/core/src")
        .file("zxing/core/src/bigint/BigInteger.cc")
        .file("zxing/core/src/bigint/BigInteger.cc")
        .file("zxing/core/src/bigint/BigInteger.hh")
        .file("zxing/core/src/bigint/BigInteger.hh")
        .file("zxing/core/src/bigint/BigIntegerAlgorithms.cc")
        .file("zxing/core/src/bigint/BigIntegerAlgorithms.cc")
        .file("zxing/core/src/bigint/BigIntegerAlgorithms.hh")
        .file("zxing/core/src/bigint/BigIntegerAlgorithms.hh")
        .file("zxing/core/src/bigint/BigIntegerLibrary.hh")
        .file("zxing/core/src/bigint/BigIntegerLibrary.hh")
        .file("zxing/core/src/bigint/BigIntegerUtils.cc")
        .file("zxing/core/src/bigint/BigIntegerUtils.cc")
        .file("zxing/core/src/bigint/BigIntegerUtils.hh")
        .file("zxing/core/src/bigint/BigIntegerUtils.hh")
        .file("zxing/core/src/bigint/BigUnsigned.cc")
        .file("zxing/core/src/bigint/BigUnsigned.cc")
        .file("zxing/core/src/bigint/BigUnsigned.hh")
        .file("zxing/core/src/bigint/BigUnsigned.hh")
        .file("zxing/core/src/bigint/BigUnsignedInABase.cc")
        .file("zxing/core/src/bigint/BigUnsignedInABase.cc")
        .file("zxing/core/src/bigint/BigUnsignedInABase.hh")
        .file("zxing/core/src/bigint/BigUnsignedInABase.hh")
        .file("zxing/core/src/bigint/NumberlikeArray.hh")
        .file("zxing/core/src/bigint/NumberlikeArray.hh")
        .file("zxing/core/src/zxing/aztec/AztecDetectorResult.cpp")
        .file("zxing/core/src/zxing/aztec/AztecDetectorResult.h")
        .file("zxing/core/src/zxing/aztec/AztecReader.cpp")
        .file("zxing/core/src/zxing/aztec/AztecReader.h")
        .file("zxing/core/src/zxing/aztec/decoder/Decoder.cpp")
        .file("zxing/core/src/zxing/aztec/decoder/Decoder.h")
        .file("zxing/core/src/zxing/aztec/detector/Detector.cpp")
        .file("zxing/core/src/zxing/aztec/detector/Detector.h")
        .file("zxing/core/src/zxing/BarcodeFormat.cpp")
        .file("zxing/core/src/zxing/BarcodeFormat.h")
        .file("zxing/core/src/zxing/Binarizer.cpp")
        .file("zxing/core/src/zxing/Binarizer.h")
        .file("zxing/core/src/zxing/BinaryBitmap.cpp")
        .file("zxing/core/src/zxing/BinaryBitmap.h")
        .file("zxing/core/src/zxing/ChecksumException.cpp")
        .file("zxing/core/src/zxing/ChecksumException.h")
        .file("zxing/core/src/zxing/common/Array.h")
        .file("zxing/core/src/zxing/common/BitArray.cpp")
        .file("zxing/core/src/zxing/common/BitArray.h")
        .file("zxing/core/src/zxing/common/BitArrayIO.cpp")
        .file("zxing/core/src/zxing/common/BitMatrix.cpp")
        .file("zxing/core/src/zxing/common/BitMatrix.h")
        .file("zxing/core/src/zxing/common/BitSource.cpp")
        .file("zxing/core/src/zxing/common/BitSource.h")
        .file("zxing/core/src/zxing/common/CharacterSetECI.cpp")
        .file("zxing/core/src/zxing/common/CharacterSetECI.h")
        .file("zxing/core/src/zxing/common/Counted.h")
        .file("zxing/core/src/zxing/common/DecoderResult.cpp")
        .file("zxing/core/src/zxing/common/DecoderResult.h")
        .file("zxing/core/src/zxing/common/detector/JavaMath.h")
        .file("zxing/core/src/zxing/common/detector/MathUtils.h")
        .file("zxing/core/src/zxing/common/detector/MonochromeRectangleDetector.cpp")
        .file("zxing/core/src/zxing/common/detector/MonochromeRectangleDetector.h")
        .file("zxing/core/src/zxing/common/detector/WhiteRectangleDetector.cpp")
        .file("zxing/core/src/zxing/common/detector/WhiteRectangleDetector.h")
        .file("zxing/core/src/zxing/common/DetectorResult.cpp")
        .file("zxing/core/src/zxing/common/DetectorResult.h")
        .file("zxing/core/src/zxing/common/GlobalHistogramBinarizer.cpp")
        .file("zxing/core/src/zxing/common/GlobalHistogramBinarizer.h")
        .file("zxing/core/src/zxing/common/GreyscaleLuminanceSource.cpp")
        .file("zxing/core/src/zxing/common/GreyscaleLuminanceSource.h")
        .file("zxing/core/src/zxing/common/GreyscaleRotatedLuminanceSource.cpp")
        .file("zxing/core/src/zxing/common/GreyscaleRotatedLuminanceSource.h")
        .file("zxing/core/src/zxing/common/GridSampler.cpp")
        .file("zxing/core/src/zxing/common/GridSampler.h")
        .file("zxing/core/src/zxing/common/HybridBinarizer.cpp")
        .file("zxing/core/src/zxing/common/HybridBinarizer.h")
        .file("zxing/core/src/zxing/common/IllegalArgumentException.cpp")
        .file("zxing/core/src/zxing/common/IllegalArgumentException.h")
        .file("zxing/core/src/zxing/common/PerspectiveTransform.cpp")
        .file("zxing/core/src/zxing/common/PerspectiveTransform.h")
        .file("zxing/core/src/zxing/common/Point.h")
        .file("zxing/core/src/zxing/common/reedsolomon/GenericGF.cpp")
        .file("zxing/core/src/zxing/common/reedsolomon/GenericGF.h")
        .file("zxing/core/src/zxing/common/reedsolomon/GenericGFPoly.cpp")
        .file("zxing/core/src/zxing/common/reedsolomon/GenericGFPoly.h")
        .file("zxing/core/src/zxing/common/reedsolomon/ReedSolomonDecoder.cpp")
        .file("zxing/core/src/zxing/common/reedsolomon/ReedSolomonDecoder.h")
        .file("zxing/core/src/zxing/common/reedsolomon/ReedSolomonException.cpp")
        .file("zxing/core/src/zxing/common/reedsolomon/ReedSolomonException.h")
        .file("zxing/core/src/zxing/common/Str.cpp")
        .file("zxing/core/src/zxing/common/Str.h")
        .file("zxing/core/src/zxing/common/StringUtils.cpp")
        .file("zxing/core/src/zxing/common/StringUtils.h")
        .file("zxing/core/src/zxing/datamatrix/DataMatrixReader.cpp")
        .file("zxing/core/src/zxing/datamatrix/DataMatrixReader.h")
        .file("zxing/core/src/zxing/datamatrix/decoder/BitMatrixParser.cpp")
        .file("zxing/core/src/zxing/datamatrix/decoder/BitMatrixParser.h")
        .file("zxing/core/src/zxing/datamatrix/decoder/DataBlock.cpp")
        .file("zxing/core/src/zxing/datamatrix/decoder/DataBlock.h")
        .file("zxing/core/src/zxing/datamatrix/decoder/DecodedBitStreamParser.cpp")
        .file("zxing/core/src/zxing/datamatrix/decoder/DecodedBitStreamParser.h")
        .file("zxing/core/src/zxing/datamatrix/decoder/Decoder.cpp")
        .file("zxing/core/src/zxing/datamatrix/decoder/Decoder.h")
        .file("zxing/core/src/zxing/datamatrix/detector/CornerPoint.cpp")
        .file("zxing/core/src/zxing/datamatrix/detector/CornerPoint.h")
        .file("zxing/core/src/zxing/datamatrix/detector/Detector.cpp")
        .file("zxing/core/src/zxing/datamatrix/detector/Detector.h")
        .file("zxing/core/src/zxing/datamatrix/detector/DetectorException.cpp")
        .file("zxing/core/src/zxing/datamatrix/detector/DetectorException.h")
        .file("zxing/core/src/zxing/datamatrix/Version.cpp")
        .file("zxing/core/src/zxing/datamatrix/Version.h")
        .file("zxing/core/src/zxing/DecodeHints.cpp")
        .file("zxing/core/src/zxing/DecodeHints.h")
        .file("zxing/core/src/zxing/Exception.cpp")
        .file("zxing/core/src/zxing/Exception.h")
        .file("zxing/core/src/zxing/FormatException.cpp")
        .file("zxing/core/src/zxing/FormatException.h")
        .file("zxing/core/src/zxing/IllegalStateException.h")
        .file("zxing/core/src/zxing/InvertedLuminanceSource.cpp")
        .file("zxing/core/src/zxing/InvertedLuminanceSource.h")
        .file("zxing/core/src/zxing/LuminanceSource.cpp")
        .file("zxing/core/src/zxing/LuminanceSource.h")
        .file("zxing/core/src/zxing/multi/ByQuadrantReader.cpp")
        .file("zxing/core/src/zxing/multi/ByQuadrantReader.h")
        .file("zxing/core/src/zxing/multi/GenericMultipleBarcodeReader.cpp")
        .file("zxing/core/src/zxing/multi/GenericMultipleBarcodeReader.h")
        .file("zxing/core/src/zxing/multi/MultipleBarcodeReader.cpp")
        .file("zxing/core/src/zxing/multi/MultipleBarcodeReader.h")
        .file("zxing/core/src/zxing/multi/qrcode/detector/MultiDetector.cpp")
        .file("zxing/core/src/zxing/multi/qrcode/detector/MultiDetector.h")
        .file("zxing/core/src/zxing/multi/qrcode/detector/MultiFinderPatternFinder.cpp")
        .file("zxing/core/src/zxing/multi/qrcode/detector/MultiFinderPatternFinder.h")
        .file("zxing/core/src/zxing/multi/qrcode/QRCodeMultiReader.cpp")
        .file("zxing/core/src/zxing/multi/qrcode/QRCodeMultiReader.h")
        .file("zxing/core/src/zxing/MultiFormatReader.cpp")
        .file("zxing/core/src/zxing/MultiFormatReader.h")
        .file("zxing/core/src/zxing/NotFoundException.h")
        .file("zxing/core/src/zxing/oned/CodaBarReader.cpp")
        .file("zxing/core/src/zxing/oned/CodaBarReader.h")
        .file("zxing/core/src/zxing/oned/Code128Reader.cpp")
        .file("zxing/core/src/zxing/oned/Code128Reader.h")
        .file("zxing/core/src/zxing/oned/Code39Reader.cpp")
        .file("zxing/core/src/zxing/oned/Code39Reader.h")
        .file("zxing/core/src/zxing/oned/Code93Reader.cpp")
        .file("zxing/core/src/zxing/oned/Code93Reader.h")
        .file("zxing/core/src/zxing/oned/EAN13Reader.cpp")
        .file("zxing/core/src/zxing/oned/EAN13Reader.h")
        .file("zxing/core/src/zxing/oned/EAN8Reader.cpp")
        .file("zxing/core/src/zxing/oned/EAN8Reader.h")
        .file("zxing/core/src/zxing/oned/ITFReader.cpp")
        .file("zxing/core/src/zxing/oned/ITFReader.h")
        .file("zxing/core/src/zxing/oned/MultiFormatOneDReader.cpp")
        .file("zxing/core/src/zxing/oned/MultiFormatOneDReader.h")
        .file("zxing/core/src/zxing/oned/MultiFormatUPCEANReader.cpp")
        .file("zxing/core/src/zxing/oned/MultiFormatUPCEANReader.h")
        .file("zxing/core/src/zxing/oned/OneDReader.cpp")
        .file("zxing/core/src/zxing/oned/OneDReader.h")
        .file("zxing/core/src/zxing/oned/OneDResultPoint.cpp")
        .file("zxing/core/src/zxing/oned/OneDResultPoint.h")
        .file("zxing/core/src/zxing/oned/UPCAReader.cpp")
        .file("zxing/core/src/zxing/oned/UPCAReader.h")
        .file("zxing/core/src/zxing/oned/UPCEANReader.cpp")
        .file("zxing/core/src/zxing/oned/UPCEANReader.h")
        .file("zxing/core/src/zxing/oned/UPCEReader.cpp")
        .file("zxing/core/src/zxing/oned/UPCEReader.h")
        .file("zxing/core/src/zxing/pdf417/decoder/BitMatrixParser.cpp")
        .file("zxing/core/src/zxing/pdf417/decoder/BitMatrixParser.h")
        .file("zxing/core/src/zxing/pdf417/decoder/DecodedBitStreamParser.cpp")
        .file("zxing/core/src/zxing/pdf417/decoder/DecodedBitStreamParser.h")
        .file("zxing/core/src/zxing/pdf417/decoder/Decoder.cpp")
        .file("zxing/core/src/zxing/pdf417/decoder/Decoder.h")
        .file("zxing/core/src/zxing/pdf417/decoder/ec/ErrorCorrection.cpp")
        .file("zxing/core/src/zxing/pdf417/decoder/ec/ErrorCorrection.h")
        .file("zxing/core/src/zxing/pdf417/decoder/ec/ModulusGF.cpp")
        .file("zxing/core/src/zxing/pdf417/decoder/ec/ModulusGF.h")
        .file("zxing/core/src/zxing/pdf417/decoder/ec/ModulusPoly.cpp")
        .file("zxing/core/src/zxing/pdf417/decoder/ec/ModulusPoly.h")
        .file("zxing/core/src/zxing/pdf417/detector/Detector.cpp")
        .file("zxing/core/src/zxing/pdf417/detector/Detector.h")
        .file("zxing/core/src/zxing/pdf417/detector/LinesSampler.cpp")
        .file("zxing/core/src/zxing/pdf417/detector/LinesSampler.h")
        .file("zxing/core/src/zxing/pdf417/PDF417Reader.cpp")
        .file("zxing/core/src/zxing/pdf417/PDF417Reader.h")
        .file("zxing/core/src/zxing/qrcode/decoder/BitMatrixParser.cpp")
        .file("zxing/core/src/zxing/qrcode/decoder/BitMatrixParser.h")
        .file("zxing/core/src/zxing/qrcode/decoder/DataBlock.cpp")
        .file("zxing/core/src/zxing/qrcode/decoder/DataBlock.h")
        .file("zxing/core/src/zxing/qrcode/decoder/DataMask.cpp")
        .file("zxing/core/src/zxing/qrcode/decoder/DataMask.h")
        .file("zxing/core/src/zxing/qrcode/decoder/DecodedBitStreamParser.cpp")
        .file("zxing/core/src/zxing/qrcode/decoder/DecodedBitStreamParser.h")
        .file("zxing/core/src/zxing/qrcode/decoder/Decoder.cpp")
        .file("zxing/core/src/zxing/qrcode/decoder/Decoder.h")
        .file("zxing/core/src/zxing/qrcode/decoder/Mode.cpp")
        .file("zxing/core/src/zxing/qrcode/decoder/Mode.h")
        .file("zxing/core/src/zxing/qrcode/detector/AlignmentPattern.cpp")
        .file("zxing/core/src/zxing/qrcode/detector/AlignmentPattern.h")
        .file("zxing/core/src/zxing/qrcode/detector/AlignmentPatternFinder.cpp")
        .file("zxing/core/src/zxing/qrcode/detector/AlignmentPatternFinder.h")
        .file("zxing/core/src/zxing/qrcode/detector/Detector.cpp")
        .file("zxing/core/src/zxing/qrcode/detector/Detector.h")
        .file("zxing/core/src/zxing/qrcode/detector/FinderPattern.cpp")
        .file("zxing/core/src/zxing/qrcode/detector/FinderPattern.h")
        .file("zxing/core/src/zxing/qrcode/detector/FinderPatternFinder.cpp")
        .file("zxing/core/src/zxing/qrcode/detector/FinderPatternFinder.h")
        .file("zxing/core/src/zxing/qrcode/detector/FinderPatternInfo.cpp")
        .file("zxing/core/src/zxing/qrcode/detector/FinderPatternInfo.h")
        .file("zxing/core/src/zxing/qrcode/ErrorCorrectionLevel.cpp")
        .file("zxing/core/src/zxing/qrcode/ErrorCorrectionLevel.h")
        .file("zxing/core/src/zxing/qrcode/FormatInformation.cpp")
        .file("zxing/core/src/zxing/qrcode/FormatInformation.h")
        .file("zxing/core/src/zxing/qrcode/QRCodeReader.cpp")
        .file("zxing/core/src/zxing/qrcode/QRCodeReader.h")
        .file("zxing/core/src/zxing/qrcode/Version.cpp")
        .file("zxing/core/src/zxing/qrcode/Version.h")
        .file("zxing/core/src/zxing/Reader.cpp")
        .file("zxing/core/src/zxing/Reader.h")
        .file("zxing/core/src/zxing/ReaderException.h")
        .file("zxing/core/src/zxing/Result.cpp")
        .file("zxing/core/src/zxing/Result.h")
        .file("zxing/core/src/zxing/ResultIO.cpp")
        .file("zxing/core/src/zxing/ResultPoint.cpp")
        .file("zxing/core/src/zxing/ResultPoint.h")
        .file("zxing/core/src/zxing/ResultPointCallback.cpp")
        .file("zxing/core/src/zxing/ResultPointCallback.h")
        .file("zxing/core/src/zxing/ZXing.h")
        .compile("zxing");

    bindgen::builder()
        .header("src/wrapper.hpp")
        .clang_arg("-Izxing/core/src")
        .clang_arg("-std=c++14")
        .enable_cxx_namespaces()
        .opaque_type("std.*")
        .whitelist_type("zxing::.*")
        .generate()
        .expect("Unable to generate bindings")
        .write_to_file(PathBuf::from(env::var("OUT_DIR").unwrap()).join("bindings.rs"))
        .expect("Couldn't write bindings!");
}
